import { useState } from 'react';
import { Meta, Story, Preview, Props } from '@storybook/addon-docs';
import { Input, InputWithContext } from '@code-x/input';
import { Checkbox } from '@code-x/checkbox';
import { Button } from '@code-x/button';
import { FormElementWrapper } from '@code-x/form-element';
import { Form } from './Form';

<Meta title="Form Components/Form" component={Form}/>

# Form
An form wraps input elements

<Preview>
  <Story name="Example">
    {() => {
      const [results, setResults] = useState(null);
      const [errors, setErrors] = useState(null);
      const [searchValue, setSearchValue] = useState('lorem');
      return (
        <Form onSubmit={(response => {
          if(response.errors.length === 0){
            setResults(response.result);
          } else {
            setResults(null);
          }
          setErrors(response.errors);
        })}>
          <Input name="example"
                 id="example"
                 label="Input"
                 type="text"
                 value="Lorem Exampum"
                 required
          />
          <FormElementWrapper label="Input With Button" id="example2">
            <InputWithContext name="example2"
                              id="example2"
                              type="text"
                              value={searchValue}
                              withButton
            />
            <Button withInput display="inlineBlock"
                    onClick={()=>setSearchValue(`${searchValue} searched`)}>Search</Button>
          </FormElementWrapper>
          <Checkbox name="checkboxEx"
                    id="checkboxEx1"
                    label="Lorem Checkum"
                    value="Lorem Checkum"
                    inline
          />
          <Checkbox name="checkboxEx"
                    id="checkboxEx2"
                    label="Ipsum Checkum"
                    value="Ipsum Checkum"
                    inline
          />
          <Button type="submit">Submit</Button>
          {results && (
            <div>
              <h2>Form Output</h2>
              <ul>
                {Object.keys(results).map(name =>(
                  <li key={name}>{name} - {results[name].value}</li>
                ))}
              </ul>
            </div>
          )}
          {errors && errors.length > 0 && (
            <div>
              <h2>Errors</h2>
              <ul>
                {errors.map(error =>(
                  <li key={error}>{error}</li>
                ))}
              </ul>
            </div>
          )}
        </Form>
      )
    }}
  </Story>
</Preview>

## Properties
<Props of={Form}/>
